# üõ† –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: FastAPI –ø—Ä–æ–µ–∫—Ç —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ —Ä–æ–ª—è–º–∏

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî —ç—Ç–æ API –Ω–∞ **FastAPI** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å **OAuth2 Bearer**  
- –ú—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –ø–æ–ª–µ `is_active`  
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞  
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å **PostgreSQL** –∏ **SQLAlchemy**  
- –ó–∞–≥—Ä—É–∑–∫–∏ —Ä–æ–ª–µ–π —Å –ø–æ–º–æ—â—å—é –∂–∞–¥–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–æ–∫ lazy loading  
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ `.env` –∏ Pydantic Settings

---

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è             | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-----------------------|--------------------------------|
| Python 3.11+          | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è           |
| FastAPI               | –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫                   |
| SQLAlchemy            | ORM —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π   |
| asyncpg               | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL |
| Pydantic              | –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ |
| Alembic               | –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö           |
| python-jose           | JWT —Ç–æ–∫–µ–Ω—ã                     |

---
## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º —á–µ—Ä–µ–∑ SQLAlchemy. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∏:

### –¢–∞–±–ª–∏—Ü–∞ `users`

| –ü–æ–ª–µ          | –¢–∏–ø          | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|---------------|--------------|--------------------------------------|
| `id`          | UUID         | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (PK) |
| `first_name`  | String       | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                     |
| `last_name`   | String       | –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                 |
| `middle_name` | String       | –û—Ç—á–µ—Å—Ç–≤–æ                            |
| `email`       | String       | –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞, —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ       |
| `hashed_password` | String    | –•–µ—à –ø–∞—Ä–æ–ª—è                         |
| `is_active`   | Boolean      | –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (soft delete) |
| `roles`       | many-to-many | –°–≤—è–∑—å —Å —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è         |

---

### –¢–∞–±–ª–∏—Ü–∞ `roles`

| –ü–æ–ª–µ          | –¢–∏–ø          | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|---------------|--------------|--------------------------------------|
| `id`          | UUID         | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–æ–ª–∏ (PK)   |
| `name`        | String       | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "admin")    |
| `description` | String       | –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏                        |
| `permissions` | many-to-many | –°–≤—è–∑—å —Å –ø—Ä–∞–≤–∞–º–∏ (permissions)        |

---

### –¢–∞–±–ª–∏—Ü–∞ `permissions`

| –ü–æ–ª–µ          | –¢–∏–ø          | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|---------------|--------------|--------------------------------------|
| `id`          | UUID         | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–∞–≤–∞ (PK)  |
| `resource`    | String       | –†–µ—Å—É—Ä—Å, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ø—Ä–∞–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "user") |
| `action`      | String       | –î–µ–π—Å—Ç–≤–∏–µ/—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "read", "write") |

---

### –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- `user_roles` ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–∏ (many-to-many)  
- `role_permissions` ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ (many-to-many)  

---

## üîë –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- JWT + OAuth2 Bearer –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
- **Soft delete**: –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –ë–î  
- –ñ–∞–¥–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–æ–ª–µ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–æ–∫ **MissingGreenlet**  
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI —Å –±—Ä–æ—Å–∞–Ω–∏–µ–º HTTP –∏—Å–∫–ª—é—á–µ–Ω–∏–π  
- –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è **circular import**
